<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org/">
<head th:replace="fragments :: head"></head>
<body>
<nav th:replace="fragments :: nav-header"></nav>
<div th:replace="fragments :: transition"></div>
<h2 class="text-center mt-5 mb-5">
  Welcome, <span th:text="${username}">dear user!</span>.
</h2>
<div class="container p-3 my-3 bg-light rounded">
  <div class="row justify-content-around">
    <div class="col-md-3 m-2 border rounded bg-white">
      <h4 class="py-3 text-center">My Groups</h4>
      <a href="/party_list">Full list of groups</a>
      <hr />
      <ol>
        <li th:each="group : ${groups}" th:text="${group.name}">Default group item</li>
      </ol>
    </div>
    <div class="col-md-5 m-2 border rounded bg-white">
      <h4 class="py-3 text-center">My Lists</h4>
      <a href="/wishlists">See all your wishlists!</a>
      <hr />
      <ol>
        <li th:each="list : ${wishlists}" th:text="${list.name}">Default list item</li>
      </ol>
    </div>
    <div class="col-md-3 m-2 border rounded bg-white">
      <h4 class="py-3 text-center">User Details</h4>
      <a href="/user_details">Need to update your info?</a>
      <hr />
      <ul>
        <li>Username: <span th:text="${username}" class="fw-bold"></span></li>
        <li>Name: <span th:text="${firstName}"></span> <span th:text="${lastName}"></span> </li>
        <li>Email: <span th:text="${email}"></span></li>
      </ul>
    </div>
  </div>
</div>

<script th:replace="fragments :: js"></script>
<script>
window.onload = () => {
    const transition_el = document.querySelector('.transition');
    const links = document.querySelectorAll('a');

    setTimeout(() => {
    transition_el.classList.remove('is-active');
    }, 500);

    for (let i = 0; i < links.length; i++){
        let link = links[i];

        link.addEventListener('click', e => {
            e.preventDefault();
            let target = e.target.href;

            transition_el.classList.add('is-active');

            setTimeout(() => {
                window.location.href = target;
                }, 500);

        })

    }

};
</script>
</body>
</html>
